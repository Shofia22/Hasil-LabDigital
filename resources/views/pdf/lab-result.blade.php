<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Lab Result #{{ $labResult->id }}</title>
    <style>
        body { font-family: DejaVu Sans, Arial, Helvetica, sans-serif; color:#111; }
        .container { width: 100%; }
        h1 { font-size: 22px; margin: 0 0 12px; }
        h2 { font-size: 16px; margin: 0 0 8px; }
        .muted { color:#555; }
        .card { border:1px solid #e5e7eb; border-radius:10px; padding:14px; margin-bottom:14px; }
        .grid { width:100%; }
        .grid td { vertical-align: top; width:50%; }
        .label { font-weight:bold; }
        .badge { display:inline-block; padding:2px 6px; font-size: 11px; border-radius: 9999px; }
        .badge-completed { background:#111827; color:#fff; }
        .badge-pending { background:#f3f4f6; color:#374151; }
        .badge-reviewed { background:#dbeafe; color:#1d4ed8; }
        pre { white-space: pre-wrap; font-size: 12px; }
        .footer { font-size: 11px; color:#6b7280; text-align:center; margin-top: 24px; }
    </style>
    </head>
<body>
    <div class="container">
        <h1>Laboratory Result</h1>
        <div class="card">
            <table class="grid" cellspacing="0" cellpadding="6">
                <tr>
                    <td>
                        <h2>Patient Information</h2>
                        <div><span class="label">Name:</span> {{ $labResult->patient->name }}</div>
                        <div><span class="label">Email:</span> {{ $labResult->patient->email }}</div>
                    </td>
                    <td>
                        <h2>Result Information</h2>
                        <div><span class="label">Test Type:</span> {{ $labResult->test_type }}</div>
                        <div><span class="label">Status:</span>
                            @php
                                $statusClass = match($labResult->status) {
                                    'completed' => 'badge badge-completed',
                                    'reviewed' => 'badge badge-reviewed',
                                    default => 'badge badge-pending',
                                };
                            @endphp
                            <span class="{{ $statusClass }}">{{ ucfirst($labResult->status) }}</span>
                        </div>
                        <div><span class="label">Date:</span> {{ $labResult->created_at->format('M d, Y H:i') }}</div>
                    </td>
                </tr>
            </table>
        </div>

        <div class="card">
            <h2>Result Value</h2>
            <pre>{{ $labResult->result_value ?: '-' }}</pre>
        </div>

        <div class="card">
            <h2>Lab Staff</h2>
            <div><span class="label">Name:</span> {{ $labResult->labStaff->name }}</div>
            <div><span class="label">Email:</span> {{ $labResult->labStaff->email }}</div>
        </div>

        @if($labResult->doctorNotes->count() > 0)
        <div class="card">
            <h2>Doctor Notes</h2>
            @foreach($labResult->doctorNotes as $note)
                <div style="margin-bottom:8px;">{{ $note->note }}
                    <div class="muted" style="font-size:11px;">By {{ $note->doctor->name }} on {{ $note->created_at->format('M d, Y H:i') }}</div>
                </div>
            @endforeach
        </div>
        @endif

        <div class="footer">Generated by {{ config('app.name','TeleHealth') }} â€¢ {{ now()->format('M d, Y H:i') }}</div>
    </div>
</body>
</html>
